# 🚨 إصلاح خطأ "Invalid API key"

## المشكلة المكتشفة:
❌ **خطأ**: `Invalid API key` - المفتاح في ملف `.env.local` غير صحيح

## 🔧 الحل (5 دقائق):

### الخطوة 1: إعداد Supabase
1. اذهب إلى [supabase.com](https://supabase.com)
2. سجل دخول أو أنشئ حساب جديد
3. اضغط **"New Project"**
4. اختر اسم المشروع: **"Safwan Cafe"**
5. اختر كلمة مرور قوية لقاعدة البيانات
6. انتظر 2-3 دقائق حتى يكتمل الإعداد

### الخطوة 2: إنشاء الجداول
1. في مشروع Supabase، اذهب إلى **SQL Editor**
2. افتح ملف `supabase-setup.sql` من مجلد المشروع
3. انسخ **كامل** المحتوى (97 سطر)
4. الصقه في SQL Editor
5. اضغط **"Run"** أو **"Execute"**
6. تأكد من ظهور رسالة نجاح

### الخطوة 3: الحصول على المفاتيح
1. في Supabase، اذهب إلى **Settings > API**
2. انسخ **Project URL** (يبدأ بـ https:// وينتهي بـ .supabase.co)
3. انسخ **anon public key** (مفتاح طويل يبدأ بـ eyJ...)

### الخطوة 4: تحديث ملف البيئة
1. افتح ملف `.env.local` في مجلد المشروع
2. استبدل القيم:

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-actual-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-actual-anon-key-here
```

### الخطوة 5: اختبار الإصلاح
```bash
# في terminal، نفذ:
node test-connection.js

# يجب أن ترى:
# ✅ الاتصال بقاعدة البيانات ناجح!
# ✅ جدول menu_items: يعمل بشكل صحيح
# ✅ جدول table_orders: يعمل بشكل صحيح
# ✅ جدول reservations: يعمل بشكل صحيح
```

### الخطوة 6: تشغيل الموقع
```bash
npm run dev
```

الموقع سيعمل على: http://localhost:3000

---

## ✅ بعد الإصلاح ستعمل جميع الميزات:

- ✅ **الصفحة الرئيسية**: تعمل بشكل طبيعي
- ✅ **صفحة الطاولات**: تحميل القوائم وحفظ الطلبات
- ✅ **صفحة الإدارة**: الإحصائيات وإدارة القوائم
- ✅ **صفحة الحجز**: حفظ الحجوزات في قاعدة البيانات

---

## 🔍 إذا استمر الخطأ:

### تحقق من:
1. **صحة المفاتيح**: تأكد من نسخ المفاتيح كاملة بدون مسافات
2. **اسم الملف**: تأكد أن الملف اسمه `.env.local` وليس `.env`
3. **موقع الملف**: يجب أن يكون في جذر المشروع (نفس مستوى package.json)

### اختبار سريع:
```bash
# تأكد من وجود الملف
ls -la .env.local

# اختبر الاتصال
node test-connection.js

# اختبر البناء
npm run build
```

---

## 📞 للمساعدة الإضافية:

إذا استمرت المشكلة، تأكد من:
1. إنشاء مشروع Supabase جديد
2. تنفيذ ملف SQL بشكل صحيح
3. نسخ المفاتيح من الصفحة الصحيحة (Settings > API)

**الموقع سيعمل بشكل مثالي بعد هذا الإصلاح!** 🎉